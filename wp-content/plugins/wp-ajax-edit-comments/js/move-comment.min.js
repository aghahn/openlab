jQuery(document).ready(function(){function l(){a("#cancel,#status a, #close a").bind("click",function(){parent.jQuery.fn.colorbox.close();return!1});a("#title a").bind("click",function(){window.open(this.href);return!1});a("#title_search").bind("click",function(){a("#post_title_move").attr("disabled","disabled");m()});a("#id_search").bind("click",function(){a("#post_id_move").attr("disabled","disabled");var b=d();b.post_id=a("#post_id").val();a("#post_id_buttons").addClass("hidden");a("#post_id_loading").removeClass("hidden"); a("#id_search").attr("disabled","disabled");a("#post_id_radio").html("");jQuery.post(ajaxurl,b,function(b){var e=0,f="";a("#id_search").removeAttr("disabled");a("#post_id_loading").addClass("hidden");typeof b.posts!="undefined"&&(e+=1,f+="<input type='radio' name='posts_id' id='posts_id_"+b.posts.post_id+"' value='"+b.posts.post_id+"' />&nbsp;&nbsp;<label for='posts_id_"+b.posts.post_id+"'>"+b.posts.post_title+"</label><br />");e>=1&&a("#post_id_buttons").removeClass("hidden"); a("#post_id_radio").html(f);a("input[name='posts_id']").click(function(){a("#post_id_move").removeAttr("disabled");var b=a(this).val();a("#post_id_move").bind("click",function(){a("#post_id_move").attr("disabled","disabled");var c=d();c.newid=b;c=i(c);jQuery.post(ajaxurl,c,function(a){j(a);parent.jQuery.fn.colorbox.close()},"json")})})},"json")})}function i(b){a("#approved:checked").length>0&&(b=a.extend(b,{approve:"1"}));return b}function m(){var b=d();b.post_title=a("#move_title").val(); a("#post_title_buttons").addClass("hidden");a("#post_title_loading").removeClass("hidden");a("#title_search").attr("disabled","disabled");a("#post_title_radio").html("");jQuery.post(ajaxurl,b,function(b){count=0;radio="";a("#title_search").removeAttr("disabled");a("#post_title_loading").addClass("hidden");a.each(b.posts,function(){this.data!=""&&(count+=1,radio+="<input type='radio' name='posts_title' id='post_title_"+this.post_id+"' value='"+this.post_id+"' />&nbsp;&nbsp;<label for='post_title_"+ this.post_id+"'>"+this.post_title+"</label><br />")});count>=1&&a("#post_title_buttons").removeClass("hidden");a("#post_title_radio").html(radio);a("input[name='posts_title']").click(function(){a("#post_title_move").removeAttr("disabled");var b=a(this).val();a("#post_title_move").bind("click",function(){a("#post_title_move").attr("disabled","disabled");var c=d();c.newid=b;c=i(c);jQuery.post(ajaxurl,c,function(a){j(a);parent.jQuery.fn.colorbox.close()},"json")})})},"json")} function k(b,c){b<0&&(b=0);var e=d();e.post_offset=b;jQuery.post(ajaxurl,e,function(f){if(typeof f.error!="undefined")alert(f.error);else{var e="",g=0;a.each(f.posts,function(){g+=1;g<6&&(e+="<input type='radio' name='posts' id='post_"+this.post_id+"' value='"+this.post_id+"' />&nbsp;&nbsp;<label for='post_"+this.post_id+"'>"+this.post_title+"</label><br />")});a("#post_loading").addClass("hidden");a("#post_buttons").removeClass("hidden");a("#post_radio").html(e);a("input[name='posts']").click(function(){a("#post_move").removeAttr("disabled"); var b=a(this).val();a("#post_move").bind("click",function(){a("#post_move").attr("disabled","disabled");var c=d();c.newid=b;c=i(c);jQuery.post(ajaxurl,c,function(a){j(a);parent.jQuery.fn.colorbox.close()},"json")})});g==6&&c=="true"?(a("#post_next").removeClass("hidden"),b>=5&&a("#post_previous").removeClass("hidden")):g>0&&g<6&&c=="true"&&a("#post_previous").removeClass("hidden");b>=5&&c=="false"?(a("#post_offset").attr("value",b),a("#post_previous").removeClass("hidden"), a("#post_next").removeClass("hidden")):b==0&&a("#post_next").removeClass("hidden")}},"json")}function n(){k(parseInt(a("#post_offset").attr("value")),"true");a("#post_next").bind("click",function(){a("#post_loading").removeClass("hidden");a("#post_radio").html("");a("#post_previous").addClass("hidden");a("#post_next").addClass("hidden");a("#post_buttons").addClass("hidden");a("#post_move").attr("disabled","disabled");p=d();var b=parseInt(a("#post_offset").attr("value"))+5;a("#post_offset").attr("value", b);k(b,"true");return!1});a("#post_previous").bind("click",function(){a("#post_loading").removeClass("hidden");a("#post_radio").html("");a("#post_previous").addClass("hidden");a("#post_next").addClass("hidden");a("#post_buttons").addClass("hidden");a("#post_move").attr("disabled","disabled");p=d();var b=parseInt(a("#post_offset").attr("value"))-5;a("#post_offset").attr("value",b);k(b,"false");return!1})}function j(b){if(typeof b.nochange=="undefined"){var c=b.comment_id,e=b.new_post.new_id,f=b.new_post.title, d=b.new_post.comments,g=b.new_post.permalink;if(self.parent.jQuery("#comment-"+c+" .post-com-count-wrapper a:first").length!=0){var h=self.parent.jQuery("#comment-"+c+" .post-com-count-wrapper a:first").attr("href"),h=h.replace(/[0-9]+$/,e);self.parent.jQuery("#comment-"+c+" .post-com-count-wrapper a:first").attr("href",h);self.parent.jQuery("#comment-"+c+" .post-com-count-wrapper a:first").html(f);h=self.parent.jQuery("#comment-"+c+" .post-com-count").attr("href");h=h.replace(/[0-9]+$/,e);self.parent.jQuery("#comment-"+ c+" .post-com-count-wrapper a:last").attr("href",h);self.parent.jQuery("#comment-"+c+" .response-links a:last").attr("href",g);a.each(self.parent.jQuery(".response:contains("+f+")"),function(){a(this).find(".comment-count").html(d)})}d=b.old_post.comments;f=b.old_post.title;a.each(self.parent.jQuery(".response:contains("+f+")"),function(){a(this).find(".comment-count").html(d)});typeof b.approved!="undefined"&&(self.parent.jQuery(".spam-count").html(b.approved.spam_count),self.parent.jQuery(".pending-count").html(b.approved.moderation_count), self.parent.jQuery(".aec-approve-"+c+",#approve-comment-"+c).hide(),self.parent.jQuery(".aec-spam-"+c+",#spam-comment-"+b.approved.comment_id).show(),self.parent.jQuery(".aec-moderate-"+c+",#moderate-comment-"+c).show());typeof b.status_message!="undefined"&&self.parent.jQuery("#comment-undo-"+c).html(b.status_message)}}function d(){var b={};b._ajax_nonce=a("#_wpnonce").val();b.cid=parseInt(a("#commentID").val());b.pid=parseInt(a("#postID").val());b.action=a("#action").val();return b}var a=jQuery; a.ajaxmovecomment={init:function(){jQuery("body.move").length<=0||(l(),n())}};a.ajaxmovecomment.init();a("body").show();a("body").attr("style","display: block;")});